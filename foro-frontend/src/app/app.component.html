<app-navbar [usuarioLogueado]="usuarioLogueado" (logout)="logout()"></app-navbar>

<div class="alert alert-info py-2 px-3 mb-4 small" style="max-width: 600px; margin: 20px auto;">
<b>Stack:</b> Angular 17 + Bootstrap · Spring Boot 3 (Java) · Postgres DB · Deploy: Vercel + Render.<br>
<span class="text-muted">
  <b>Nota:</b> La primera carga puede demorar hasta 30 segundos porque el backend gratuito se "despierta". Luego todo será más rápido.
</span>
</div>

<div class="container mt-4">
<div class="row justify-content-center">

  <div *ngIf="!usuarioLogueado" class="col-12">

  <!-- Solo muestra los botones en mobile -->
      <div class="d-block d-md-none mb-3">
        <button class="btn btn-primary w-100 mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#registroCollapse">
          Registro de Usuario
        </button>
        <div class="collapse" id="registroCollapse">
          <app-registro></app-registro>
        </div>

        <button class="btn btn-secondary w-100 mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#loginCollapse">
          Iniciar Sesión
        </button>
        <div class="collapse" id="loginCollapse">
          <app-login></app-login>
      </div>



      </div>

      <!-- En desktop (md+) muestra ambos formularios normalmente -->
      <div class="d-none d-md-flex justify-content-evenly align-items-start gap-4" >
      <app-registro></app-registro>
      <br>
      <app-login></app-login>
      </div>


  </div>




  <div class="col-md-12">
    <app-temas></app-temas>
  </div>

    <!-- Lista de usuarios -->
  <div class="card mt-4">
  <div class="card-header">Usuarios registrados</div>
  <ul class="list-group list-group-flush">
    <li *ngFor="let user of usuarios" class="list-group-item d-flex justify-content-between align-items-center">
      <span>
        <b>{{ user.username }}</b>
        <span class="badge bg-secondary ms-2">{{ user.rol }}</span>
      </span>
      <button *ngIf="esAdmin" class="btn btn-danger btn-sm" (click)="eliminarUsuario(user.id!)">Eliminar</button>
    </li>
  </ul>
  <div *ngIf="mensajeUsuarios" class="alert alert-warning m-2 text-center">{{ mensajeUsuarios }}</div>
  </div>

</div>
</div>